<!DOCTYPE html>
<html>
<head>
  <title>Seattle Parking</title>
  <%= stylesheet_link_tag    "application", media: "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>

<body onload="initialiseMap();initialise()">
  <div class='container'>
    <nav class="navbar navbar-default" role="navigation">
      <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-  target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">nav logo here</a>
        </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li> link to something here</li> |
          <li> link to another thing here</li>
        </ul>
      </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
    <hr>

    <div class="content">
      <%= yield %>
    </div>

    <div class='text-muted'><small>Footer</small></div>
  </div>


   <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

    <script>
    function initialiseMap()
    {
        var myOptions = {
            zoom: 16,
            mapTypeControl: true,
            mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
            navigationControl: true,
            navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
            mapTypeId: google.maps.MapTypeId.ROADMAP
          }
      map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    }
    function initialise()
    {
      if(geoPosition.init())
      {
        document.getElementById('current').innerHTML="Receiving...";
        geoPosition.getCurrentPosition(showPosition,function(){document.getElementById('current').innerHTML="Couldn't get location"},{enableHighAccuracy:true});
      }
      else
      {
        document.getElementById('current').innerHTML="Functionality not available";
      }
    }

    function showPosition(p)
    {
      var latitude = parseFloat( p.coords.latitude );
      var longitude = parseFloat( p.coords.longitude );
      document.getElementById('current').innerHTML="latitude=" + latitude + " longitude=" + longitude;
      var pos=new google.maps.LatLng( latitude , longitude);
      map.setCenter(pos);
      map.setZoom(16);

      var marker = new google.maps.Marker({
          position: pos,
          map: map,
          title:"You are here"
      });

      google.maps.event.addListener(marker, 'click', function() {
        infowindow.open(map,marker);
      });

    }
    </script>

</body>
</html>



